<div id="settings_plugin_livegcodecontrol">
    <h2>Live G-code Control Rules</h2>

    <form class="form-horizontal">
        <div class="control-group">
            <label class="control-label" for="lgcc_pattern">Regex Pattern</label>
            <div class="controls">
                <input type="text" id="lgcc_pattern" data-bind="value: newRulePattern" class="input-xlarge">
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="lgcc_action_type">Action Type</label>
            <div class="controls">
                <select id="lgcc_action_type" data-bind="value: newRuleActionType">
                    <option value="modify">Modify</option>
                    <option value="skip">Skip/Suppress</option>
                    <option value="inject_before">Inject Before</option>
                    <option value="inject_after">Inject After</option>
                    <option value="replace">Replace</option>
                </select>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="lgcc_action_gcode">Action G-code(s)</label>
            <div class="controls">
                <textarea id="lgcc_action_gcode" rows="3" data-bind="value: newRuleActionGcode" class="input-xlarge"></textarea>
                <p class="muted">Enter one G-code command per line if applicable for the action type.</p>
            </div>
        </div>
        <div class="control-group">
            <div class="controls">
                <button type="button" class="btn btn-primary" id="lgcc_add_rule_btn" data-bind="click: addRule, text: addOrUpdateRuleButtonText"></button>
                <button type="button" class="btn" id="lgcc_cancel_edit_btn" data-bind="click: cancelEdit, visible: editingRule" style="margin-left: 5px;">Cancel Edit</button>
            </div>
        </div>
    </form>

    <hr>

    <h3>Current Rules</h3>
    <table class="table table-striped table-bordered table-hover" id="lgcc_rules_table">
        <thead>
            <tr>
                <th style="width: 10%;">Enabled</th>
                <th>Pattern</th>
                <th>Action</th>
                <th>G-code</th>
                <th style="width: 20%;">Controls</th>
            </tr>
        </thead>
        <tbody data-bind="foreach: rules">
            <tr>
                <td><input type="checkbox" data-bind="checked: enabled"></td>
                <td data-bind="text: pattern"></td>
                <td data-bind="text: actionType"></td>
                <td data-bind="text: actionGcode" style="white-space: pre-wrap;"></td>
                <td>
                    <button class="btn btn-mini" data-bind="click: $parent.editRule.bind($parent)">Edit</button>
                    <button class="btn btn-mini btn-danger" data-bind="click: $parent.removeRule.bind($parent)">Delete</button>
                </td>
            </tr>
        </tbody>
        <tbody data-bind="ifnot: rules().length">
            <tr>
                <td colspan="5" class="text-center">No rules defined yet.</td>
            </tr>
        </tbody>
    </table>
</div>
